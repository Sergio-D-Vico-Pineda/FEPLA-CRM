---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

import { tursodb } from "../../astro.config.mjs";

const { rows } = await tursodb.execute("SELECT * FROM empresa;");
---

<Layout title="Empresa">
    <div class="structure">
        <Header />
        <div class="flex justify-between w-full px-5 py-2 h-fit">
            <h2>Listado de empresas</h2>
            <div class="flex items-stretch gap-4">
                <input
                    class="bg-gray-700 border border-gray-300 text-white text-sm rounded-lg p-1.5"
                    type="text"
                    placeholder="Nombre de la empresa"
                />
                <button
                    class="bg-blue-700 hover:bg-blue-800 text-white rounded-lg text-xs px-2 py-2 transition-colors"
                    >Buscar</button
                >
                <button
                    id="btnnew"
                    class="bg-blue-700 hover:bg-blue-800 text-white rounded-lg text-xs px-2 py-2 transition-colors"
                    >Nueva empresa</button
                >
            </div>
        </div>
        <main>
            <ul>
                {rows.map((row) => <li>{row.email}</li>)}
            </ul>
        </main>
        <Footer />
    </div>
</Layout>
<script>
    document.getElementById("btnnew").addEventListener("click", () => {
        window.location.href = "/nuevaempresa";
    });
</script>
