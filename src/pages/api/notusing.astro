---
import Layout from "../../layouts/Layout.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";

import { tursodb } from "../../../astro.config.mjs";

import type { APIRoute } from 'astro';

export const post: APIRoute = async ({ request }) => {
 /*  try { */
    // Get the data sent in the POST request
    const data = await request.json();

    // Log the received data to the server console (optional)
    console.log('Data received:', data);

    // Return the received data in the response
    /* return new Response(JSON.stringify({
      success: true,
      receivedData: data,
    }), {
      headers: {
        'Content-Type': 'application/json',
      },
    }); 
  } catch (error) {
      console.error('Error parsing JSON:', error);
    }*/
    return new Response(JSON.stringify({
      success: false,
      error: 'Invalid JSON data',
    }), {
      headers: {
        'Content-Type': 'application/json',
      },
      status: 400,
    });
};
---